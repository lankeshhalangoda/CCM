<!DOCTYPE html>
<html lang="en" ng-app="dashboardApp">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Unified Complaint Management</title>
    
    <!-- AngularJS 1.8.3 -->
    <script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.8.3/angular.min.js"></script>
    
    <!-- Highcharts (primary from jsDelivr to avoid rate limits) -->
    <script src="https://cdn.jsdelivr.net/npm/highcharts@11.4.7/highcharts.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/highcharts@11.4.7/modules/heatmap.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/highcharts@11.4.7/highcharts-more.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/highcharts@11.4.7/modules/wordcloud.min.js"></script>
    <script src="https://code.highcharts.com/modules/funnel.js"></script>
    <script src="https://code.highcharts.com/maps/highmaps.js"></script>
    <script src="https://code.highcharts.com/maps/modules/exporting.js"></script>
    
    <!-- Styles -->
    <link rel="stylesheet" href="styles.css">
</head>
<body ng-controller="DashboardController" ng-click="closeAllMenus($event)">
    <!-- Fixed Header -->
    <div class="dashboard-header">
        <div class="header-row header-top" ng-click="$event.stopPropagation()">
            <button class="hamburger-button" title="Menu" aria-label="Open menu" ng-click="toggleSidebar()">
                <svg width="28" height="28" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" aria-hidden="true">
                    <rect x="0.75" y="0.75" width="22.5" height="22.5" rx="6" stroke="#337ab7" stroke-width="2"/>
                    <path d="M7 9h10M7 12h10M7 15h10" stroke="#337ab7" stroke-width="2.2" stroke-linecap="round"/>
                </svg>
            </button>
            <div class="header-title">Unified Complaint Management</div>
            <div class="header-spacer"></div>
            <div class="account-area">
                <span class="account-label">Account</span>
                <select class="account-select" ng-model="selectedAccount">
                    <option selected>Lankesh</option>
                </select>
            </div>
            <div class="header-logo" title="Unified Dashboard" aria-label="Unified Dashboard">
                <svg width="28" height="28" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" aria-hidden="true">
                    <path d="M3 12a9 9 0 1118 0 9 9 0 01-18 0zm4-1h10v2H7v-2zm2-4h6v2H9V7zm0 8h6v2H9v-2z" fill="#337ab7"/>
                </svg>
            </div>
        </div>
        <div class="header-row header-filters" ng-click="$event.stopPropagation()">
            <div class="filters-applied" aria-label="Applied filters">
                <span class="filters-label">Filters:</span>
                <div class="filter-badges">
                    <span class="filter-badge"><span class="badge-key">Sources:</span> Social, Survey</span>
                    <span class="filter-badge"><span class="badge-key">Sentiment:</span> All</span>
                    <span class="filter-badge"><span class="badge-key">Countries:</span> All</span>
                </div>
            </div>
            <button class="filter-fab" title="Open filters" aria-label="Open filters" ng-click="openFilters()">
                <svg width="18" height="18" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" aria-hidden="true">
                    <path d="M3 5a1 1 0 0 1 1-1h16a1 1 0 0 1 .8 1.6L15 12v6a1 1 0 0 1-.553.894l-4 2A1 1 0 0 1 9 20v-8L3.2 6.6A1 1 0 0 1 3 5z" fill="white"/>
                </svg>
            </button>
        </div>
    </div>
    
    <!-- Tab Navigation -->
    <div class="tab-container">
        <div class="tabs">
            <button class="tab" 
                    ng-class="{'active': activeTab === 'overview'}" 
                    ng-click="setActiveTab('overview')"
                    data-color="blue">
                <span class="tab-icon" aria-hidden="true">
                    <svg width="16" height="16" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                        <path d="M4 19h16M6 16v-7m4 7V7m4 9V9m4 7v-5" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
                    </svg>
                </span>
                Complaint Overview
            </button>
            <button class="tab" 
                    ng-class="{'active': activeTab === 'source'}" 
                    ng-click="setActiveTab('source')"
                    data-color="green">
                <span class="tab-icon" aria-hidden="true">
                    <svg width="16" height="16" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                        <path d="M4 6h6v6H4V6zm10 0h6v6h-6V6zM4 16h6v4H4v-4zm10 0h6v4h-6v-4z" stroke="currentColor" stroke-width="2"/>
                    </svg>
                </span>
                Source & Channel Analytics
            </button>
            <button class="tab" 
                    ng-class="{'active': activeTab === 'category'}" 
                    ng-click="setActiveTab('category')"
                    data-color="orange">
                <span class="tab-icon" aria-hidden="true">
                    <svg width="16" height="16" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                        <path d="M3 11l9-7 9 7-9 7-9-7zM12 18l9-7" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
                    </svg>
                </span>
                Category & Keyword Analytics
            </button>
            <button class="tab" 
                    ng-class="{'active': activeTab === 'location'}" 
                    ng-click="setActiveTab('location')"
                    data-color="teal">
                <span class="tab-icon" aria-hidden="true">
                    <svg width="16" height="16" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                        <path d="M21 10c0 7-9 13-9 13s-9-6-9-13a9 9 0 0 1 18 0z" stroke="currentColor" stroke-width="2"/>
                        <circle cx="12" cy="10" r="3" stroke="currentColor" stroke-width="2"/>
                    </svg>
                </span>
                Location Analytics
            </button>
            <button class="tab" 
                    ng-class="{'active': activeTab === 'resolution'}" 
                    ng-click="setActiveTab('resolution')"
                    data-color="red">
                <span class="tab-icon" aria-hidden="true">
                    <svg width="16" height="16" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                        <path d="M12 6v6l4 2" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
                        <circle cx="12" cy="12" r="9" stroke="currentColor" stroke-width="2"/>
                    </svg>
                </span>
                Resolution & Performance
            </button>
            <button class="tab" 
                    ng-class="{'active': activeTab === 'timeline'}" 
                    ng-click="setActiveTab('timeline')"
                    data-color="cyan">
                <span class="tab-icon" aria-hidden="true">
                    <svg width="16" height="16" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                        <path d="M4 12h16M12 4v16" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
                    </svg>
                </span>
                Timeline & Insights
            </button>
        </div>
    </div>
    
    <!-- Main Content -->
    <div class="main-content">
        <div ng-switch="activeTab">
        <!-- Section: Complaint Overview -->
        <div ng-switch-when="overview" class="dashboard-section">
            <h2 class="section-title"><span class="section-icon" aria-hidden="true">
                <svg width="18" height="18" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                    <path d="M4 19h16M6 16v-7m4 7V7m4 9V9m4 7v-5" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
                </svg>
            </span>Complaint Overview</h2>
            <div class="section-subtitle">High-level trends, volumes, and status distribution across all complaints.</div>
            <div class="kpi-grid">
                <div class="kpi-card kpi-total">
                    <div class="kpi-card-header">
                        <div class="kpi-title-wrap">
                            <div class="kpi-title">Total Tickets</div>
                            <button class="kpi-info" title="Total number of complaints in the selected period">i</button>
                            </div>
                        <div class="kpi-icon" aria-hidden="true">
                            <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                                <path d="M4 19h16M6 16v-7m4 7V7m4 9V9m4 7v-5" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
                            </svg>
                        </div>
                    </div>
                    <div class="kpi-value">{{kpiData.total.value}}</div>
                    <div class="kpi-delta negative">-5.6% from previous month</div>
                </div>
                <div class="kpi-card kpi-open">
                    <div class="kpi-card-header">
                        <div class="kpi-title-wrap">
                            <div class="kpi-title">Open Tickets</div>
                            <button class="kpi-info" title="Currently open complaints">i</button>
                        </div>
                        <div class="kpi-icon" aria-hidden="true">
                            <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                                <circle cx="12" cy="12" r="9" stroke="currentColor" stroke-width="2"/>
                            </svg>
                        </div>
                    </div>
                    <div class="kpi-value">{{kpiData.open.value}}</div>
                    <div class="kpi-delta positive">+2.3% from previous month</div>
                </div>
                <div class="kpi-card kpi-inprogress">
                    <div class="kpi-card-header">
                        <div class="kpi-title-wrap">
                            <div class="kpi-title">In Progress Tickets</div>
                            <button class="kpi-info" title="Complaints currently being worked on">i</button>
                        </div>
                        <div class="kpi-icon" aria-hidden="true">
                            <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                                <path d="M12 6v6l4 2" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
                                <circle cx="12" cy="12" r="9" stroke="currentColor" stroke-width="2"/>
                            </svg>
                        </div>
                    </div>
                    <div class="kpi-value">{{kpiData.inProgress.value}}</div>
                    <div class="kpi-delta negative">-1.1% from previous month</div>
                </div>
                <div class="kpi-card kpi-resolved">
                    <div class="kpi-card-header">
                        <div class="kpi-title-wrap">
                            <div class="kpi-title">Resolved Tickets</div>
                            <button class="kpi-info" title="Complaints resolved in the selected period">i</button>
                        </div>
                        <div class="kpi-icon" aria-hidden="true">
                            <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                                <path d="M6 12l4 4 8-8" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                            </svg>
                        </div>
                    </div>
                    <div class="kpi-value">{{kpiData.resolved.value}}</div>
                    <div class="kpi-delta positive">+4.9% from previous month</div>
                </div>
            </div>
            <div class="charts-grid">
                <!-- 1. Channel-wise Complaint Distribution -->
                <div class="chart-card">
                    <div class="chart-header">
                        <h3 class="chart-title">Channel-wise Complaint Distribution</h3>
                        <div class="chart-actions">
                            <button class="fullscreen-button" title="View full screen" aria-label="View full screen" ng-click="toggleFullscreen($event)">
                                <svg width="18" height="18" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                                    <path d="M4 9V4h5v2H6v3H4zm10-5h5v5h-2V6h-3V4zM9 20H4v-5h2v3h3v2zm11-5v5h-5v-2h3v-3h2z" fill="currentColor"/>
                                </svg>
                            </button>
                        </div>
                    </div>
                    <div class="chart-toolbar">
                        <div class="chart-toolbar-left">
                            <div class="chart-toggle">
                            <button ng-class="{'active': channelChartType === 'bar'}" ng-click="switchChannelChart('bar')">Bar Chart</button>
                            <button ng-class="{'active': channelChartType === 'pie'}" ng-click="switchChannelChart('pie')">Donut Chart</button>
                            </div>
                            </div>
                            <div class="chart-menu" ng-click="$event.stopPropagation()">
                                <button class="menu-button" ng-click="toggleChartMenu('channel')">⋯</button>
                                <div class="menu-dropdown" ng-class="{'show': chartMenus.channel}">
                                    <div class="menu-item" ng-click="downloadChart('channel', 'png')">Download PNG</div>
                                    <div class="menu-item" ng-click="downloadChart('channel', 'csv')">Download CSV</div>
                            </div>
                        </div>
                    </div>
                    <div class="chart-container" hc-chart="channelChartConfig"></div>
                </div>
                
                <!-- 2. Complaint Trend Over Time -->
                <div class="chart-card">
                    <div class="chart-header">
                        <h3 class="chart-title">Complaint Trend Over Time</h3>
                        <div class="chart-actions">
                            <button class="fullscreen-button" title="View full screen" aria-label="View full screen">
                                <svg width="18" height="18" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                                    <path d="M4 9V4h5v2H6v3H4zm10-5h5v5h-2V6h-3V4zM9 20H4v-5h2v3h3v2zm11-5v5h-5v-2h3v-3h2z" fill="currentColor"/>
                                </svg>
                            </button>
                            <div class="chart-menu" ng-click="$event.stopPropagation()">
                                <button class="menu-button" ng-click="toggleChartMenu('trend')" title="More options" aria-label="More options">
                                    <svg width="18" height="18" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M3 7h18M3 12h18M3 17h18" stroke="currentColor" stroke-width="2" stroke-linecap="round"/></svg>
                                </button>
                                <div class="menu-dropdown" ng-class="{'show': chartMenus.trend}">
                                    <div class="menu-item" ng-click="downloadChart('trend', 'png')">Download PNG</div>
                                    <div class="menu-item" ng-click="downloadChart('trend', 'csv')">Download CSV</div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="chart-container" hc-chart="trendChartConfig"></div>
                </div>
                
                <!-- 3. Complaint Status Breakdown -->
                <div class="chart-card">
                    <div class="chart-header">
                        <h3 class="chart-title">Complaint Status Breakdown</h3>
                        <div class="chart-actions">
                            <button class="fullscreen-button" title="View full screen" aria-label="View full screen" ng-click="toggleFullscreen($event)">
                                <svg width="18" height="18" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                                    <path d="M4 9V4h5v2H6v3H4zm10-5h5v5h-2V6h-3V4zM9 20H4v-5h2v3h3v2zm11-5v5h-5v-2h3v-3h2z" fill="currentColor"/>
                                </svg>
                            </button>
                        </div>
                    </div>
                    <div class="chart-toolbar">
                        <div class="chart-toolbar-left">
                            <div class="chart-toggle">
                            <button ng-class="{'active': statusBreakdownType === 'bar'}" ng-click="switchStatusBreakdown('bar')">Bar Chart</button>
                            <button ng-class="{'active': statusBreakdownType === 'pie'}" ng-click="switchStatusBreakdown('pie')">Donut Chart</button>
                            </div>
                        </div>
                        <div class="chart-menu" ng-click="$event.stopPropagation()">
                            <button class="menu-button" ng-click="toggleChartMenu('statusBreakdown')">⋯</button>
                            <div class="menu-dropdown" ng-class="{'show': chartMenus.statusBreakdown}">
                                <div class="menu-item" ng-click="downloadChart('statusBreakdown', 'png')">Download PNG</div>
                                <div class="menu-item" ng-click="downloadChart('statusBreakdown', 'csv')">Download CSV</div>
                            </div>
                        </div>
                    </div>
                    <div class="chart-container" hc-chart="statusBreakdownChartConfig"></div>
                </div>
                
                <!-- 4. Priority Split -->
                <div class="chart-card">
                    <div class="chart-header">
                        <h3 class="chart-title">Priority Split</h3>
                        <div class="chart-actions">
                            <button class="fullscreen-button" title="View full screen" aria-label="View full screen" ng-click="toggleFullscreen($event)">
                                <svg width="18" height="18" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                                    <path d="M4 9V4h5v2H6v3H4zm10-5h5v5h-2V6h-3V4zM9 20H4v-5h2v3h3v2zm11-5v5h-5v-2h3v-3h2z" fill="currentColor"/>
                                </svg>
                            </button>
                        </div>
                    </div>
                    <div class="chart-toolbar">
                        <div class="chart-toolbar-left">
                            <div class="chart-toggle">
                            <button ng-class="{'active': prioritySplitType === 'donut'}" ng-click="switchPrioritySplit('donut')">Donut Chart</button>
                            <button ng-class="{'active': prioritySplitType === 'bar'}" ng-click="switchPrioritySplit('bar')">Bar Chart</button>
                            </div>
                        </div>
                        <div class="chart-menu" ng-click="$event.stopPropagation()">
                            <button class="menu-button" ng-click="toggleChartMenu('prioritySplit')">⋯</button>
                            <div class="menu-dropdown" ng-class="{'show': chartMenus.prioritySplit}">
                                <div class="menu-item" ng-click="downloadChart('prioritySplit', 'png')">Download PNG</div>
                                <div class="menu-item" ng-click="downloadChart('prioritySplit', 'csv')">Download CSV</div>
                            </div>
                        </div>
                    </div>
                    <div class="chart-container" hc-chart="prioritySplitChartConfig"></div>
                </div>
                
                <!-- 5. Status vs Priority Chart -->
                <div class="chart-card">
                    <div class="chart-header">
                        <h3 class="chart-title">Status vs Priority Chart</h3>
                        <div class="chart-actions">
                            <button class="fullscreen-button" title="View full screen" aria-label="View full screen" ng-click="toggleFullscreen($event)">
                                <svg width="18" height="18" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                                    <path d="M4 9V4h5v2H6v3H4zm10-5h5v5h-2V6h-3V4zM9 20H4v-5h2v3h3v2zm11-5v5h-5v-2h3v-3h2z" fill="currentColor"/>
                                </svg>
                            </button>
                        </div>
                        <div class="chart-menu" ng-click="$event.stopPropagation()">
                            <button class="menu-button" ng-click="toggleChartMenu('statusVsPriority')">⋯</button>
                            <div class="menu-dropdown" ng-class="{'show': chartMenus.statusVsPriority}">
                                <div class="menu-item" ng-click="downloadChart('statusVsPriority', 'png')">Download PNG</div>
                                <div class="menu-item" ng-click="downloadChart('statusVsPriority', 'csv')">Download CSV</div>
                            </div>
                        </div>
                    </div>
                    <div class="chart-container" hc-chart="statusVsPriorityChartConfig"></div>
                </div>
                
                <!-- 6. Complaint Volume by Day & Hour (Bubble chart, half width) -->
                <div class="chart-card">
                    <div class="chart-header">
                        <h3 class="chart-title">Complaint Volume by Day and Hour</h3>
                        <div class="chart-actions">
                            <button class="fullscreen-button" title="View full screen" aria-label="View full screen" ng-click="toggleFullscreen($event)">
                                <svg width="18" height="18" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                                    <path d="M4 9V4h5v2H6v3H4zm10-5h5v5h-2V6h-3V4zM9 20H4v-5h2v3h3v2zm11-5v5h-5v-2h3v-3h2z" fill="currentColor"/>
                                </svg>
                            </button>
                        </div>
                        <div class="chart-menu" ng-click="$event.stopPropagation()">
                            <button class="menu-button" ng-click="toggleChartMenu('dayHourHeatmap')">⋯</button>
                            <div class="menu-dropdown" ng-class="{'show': chartMenus.dayHourHeatmap}">
                                <div class="menu-item" ng-click="downloadChart('dayHourHeatmap', 'png')">Download PNG</div>
                                <div class="menu-item" ng-click="downloadChart('dayHourHeatmap', 'csv')">Download CSV</div>
                            </div>
                        </div>
                    </div>
                    <div class="chart-container large" hc-chart="dayHourHeatmapConfig"></div>
                </div>

                <!-- 7. Complaint Growth Rate -->
                <div class="chart-card">
                    <div class="chart-header">
                        <h3 class="chart-title">Complaint Growth Rate</h3>
                        <div class="chart-actions">
                            <button class="fullscreen-button" title="View full screen" aria-label="View full screen" ng-click="toggleFullscreen($event)">
                                <svg width="18" height="18" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                                    <path d="M4 9V4h5v2H6v3H4zm10-5h5v5h-2V6h-3V4zM9 20H4v-5h2v3h3v2zm11-5v5h-5v-2h3v-3h2z" fill="currentColor"/>
                                </svg>
                            </button>
                        </div>
                        <div class="chart-menu" ng-click="$event.stopPropagation()">
                            <button class="menu-button" ng-click="toggleChartMenu('monthlyGrowth')">⋯</button>
                            <div class="menu-dropdown" ng-class="{'show': chartMenus.monthlyGrowth}">
                                <div class="menu-item" ng-click="downloadChart('monthlyGrowth', 'png')">Download PNG</div>
                                <div class="menu-item" ng-click="downloadChart('monthlyGrowth', 'csv')">Download CSV</div>
            </div>
                        </div>
                    </div>
                    <div class="chart-container" hc-chart="monthlyGrowthChartConfig"></div>
        </div>
        
                <!-- 8. Complaints per 1,000 Interactions -->
                <div class="chart-card">
                    <div class="chart-header">
                        <h3 class="chart-title">Complaints per 1,000 Interactions</h3>
                        <div class="chart-menu" ng-click="$event.stopPropagation()">
                            <button class="menu-button" ng-click="toggleChartMenu('perThousand')">⋯</button>
                            <div class="menu-dropdown" ng-class="{'show': chartMenus.perThousand}">
                                <div class="menu-item" ng-click="downloadChart('perThousand', 'png')">Download PNG</div>
                                <div class="menu-item" ng-click="downloadChart('perThousand', 'csv')">Download CSV</div>
                            </div>
                        </div>
                    </div>
                    <div class="chart-container" hc-chart="perThousandChartConfig"></div>
                </div>
            </div>
        </div>
        
        <!-- Source Analytics Tab -->
        <div ng-switch-when="source" class="dashboard-section">
            <!-- Section: Source Analytics -->
            <div class="dashboard-section">
                <h2 class="section-title"><span class="section-icon" aria-hidden="true">
                    <svg width="18" height="18" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                        <path d="M4 6h6v6H4V6zm10 0h6v6h-6V6zM4 16h6v4H4v-4zm10 0h6v4h-6v-4z" stroke="currentColor" stroke-width="2"/>
                    </svg>
                </span>Source Analytics</h2>
                <div class="section-subtitle">Analyze complaint distribution and performance across different sources.</div>
            <div class="charts-grid">
                <!-- 1. Source vs Status -->
                <div class="chart-card">
                    <div class="chart-header">
                        <h3 class="chart-title">Source vs Status</h3>
                        <div class="chart-menu" ng-click="$event.stopPropagation()">
                            <button class="menu-button" ng-click="toggleChartMenu('sourceStatus')">⋯</button>
                            <div class="menu-dropdown" ng-class="{'show': chartMenus.sourceStatus}">
                                <div class="menu-item" ng-click="downloadChart('sourceStatus', 'png')">Download PNG</div>
                                <div class="menu-item" ng-click="downloadChart('sourceStatus', 'csv')">Download CSV</div>
                            </div>
                        </div>
                    </div>
                    <div class="chart-container" hc-chart="sourceStatusChartConfig"></div>
                </div>
                
                <!-- 2. Source vs Priority -->
                <div class="chart-card">
                    <div class="chart-header">
                        <h3 class="chart-title">Source vs Priority</h3>
                        <div class="chart-menu" ng-click="$event.stopPropagation()">
                            <button class="menu-button" ng-click="toggleChartMenu('sourcePriority')">⋯</button>
                            <div class="menu-dropdown" ng-class="{'show': chartMenus.sourcePriority}">
                                <div class="menu-item" ng-click="downloadChart('sourcePriority', 'png')">Download PNG</div>
                                <div class="menu-item" ng-click="downloadChart('sourcePriority', 'csv')">Download CSV</div>
                            </div>
                        </div>
                    </div>
                    <div class="chart-container" hc-chart="sourcePriorityChartConfig"></div>
                </div>
                
                <!-- 3. Source vs Resolution Time -->
                <div class="chart-card">
                    <div class="chart-header">
                        <h3 class="chart-title">Source vs Resolution Time</h3>
                        <div class="chart-menu" ng-click="$event.stopPropagation()">
                            <button class="menu-button" ng-click="toggleChartMenu('sourceResTime')">⋯</button>
                            <div class="menu-dropdown" ng-class="{'show': chartMenus.sourceResTime}">
                                <div class="menu-item" ng-click="downloadChart('sourceResTime', 'png')">Download PNG</div>
                                <div class="menu-item" ng-click="downloadChart('sourceResTime', 'csv')">Download CSV</div>
                            </div>
                        </div>
                    </div>
                    <div class="chart-container" hc-chart="sourceResTimeChartConfig"></div>
                </div>
                
                <!-- 4. Source Share (%) -->
                <div class="chart-card">
                    <div class="chart-header">
                        <h3 class="chart-title">Source Share (%)</h3>
                            </div>
                    <div class="chart-toolbar">
                        <div class="chart-toolbar-left">
                            <div class="chart-toggle">
                            <button ng-class="{'active': sourceShareType === 'pie'}" ng-click="switchSourceShare('pie')">Donut Chart</button>
                            <button ng-class="{'active': sourceShareType === 'bar'}" ng-click="switchSourceShare('bar')">Bar Chart</button>
                        </div>
                    </div>
                        <div class="chart-menu" ng-click="$event.stopPropagation()">
                            <button class="menu-button" ng-click="toggleChartMenu('sourceShare')">⋯</button>
                            <div class="menu-dropdown" ng-class="{'show': chartMenus.sourceShare}">
                                <div class="menu-item" ng-click="downloadChart('sourceShare', 'png')">Download PNG</div>
                                <div class="menu-item" ng-click="downloadChart('sourceShare', 'csv')">Download CSV</div>
                            </div>
                        </div>
                    </div>
                    <div class="chart-container" hc-chart="sourceShareChartConfig"></div>
                </div>
            </div>
        </div>
        
            <!-- Section: Social & Messaging Channel Analytics -->
            <div class="dashboard-section section-spacing-top">
                <h2 class="section-title"><span class="section-icon" aria-hidden="true">
                    <svg width="18" height="18" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                        <path d="M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                        <path d="M8 10h8M8 14h6" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
                    </svg>
                </span>Social & Messaging Channel Analytics</h2>
                <div class="section-subtitle">Track performance and trends across social media and messaging platforms.</div>
                <div class="charts-grid">
                <!-- 5. Social & Messaging Channel Breakdown -->
                <div class="chart-card">
                    <div class="chart-header">
                        <h3 class="chart-title">Social & Messaging Channel Breakdown</h3>
                        <div class="chart-menu" ng-click="$event.stopPropagation()">
                            <button class="menu-button" ng-click="toggleChartMenu('socialMessagingBreakdown')">⋯</button>
                            <div class="menu-dropdown" ng-class="{'show': chartMenus.socialMessagingBreakdown}">
                                <div class="menu-item" ng-click="downloadChart('socialMessagingBreakdown', 'png')">Download PNG</div>
                                <div class="menu-item" ng-click="downloadChart('socialMessagingBreakdown', 'csv')">Download CSV</div>
                            </div>
                        </div>
                    </div>
                    <div class="chart-container" hc-chart="socialMessagingBreakdownChartConfig"></div>
                </div>

                <!-- 6. Social & Messaging Channel vs Status -->
                <div class="chart-card">
                    <div class="chart-header">
                        <h3 class="chart-title">Social & Messaging Channel vs Status</h3>
                        <div class="chart-menu" ng-click="$event.stopPropagation()">
                            <button class="menu-button" ng-click="toggleChartMenu('socialMessagingVsStatus')">⋯</button>
                            <div class="menu-dropdown" ng-class="{'show': chartMenus.socialMessagingVsStatus}">
                                <div class="menu-item" ng-click="downloadChart('socialMessagingVsStatus', 'png')">Download PNG</div>
                                <div class="menu-item" ng-click="downloadChart('socialMessagingVsStatus', 'csv')">Download CSV</div>
                            </div>
                        </div>
                    </div>
                    <div class="chart-container" hc-chart="socialMessagingVsStatusChartConfig"></div>
                </div>

                <!-- 7. Social & Messaging Channel vs Priority -->
                <div class="chart-card">
                    <div class="chart-header">
                        <h3 class="chart-title">Social & Messaging Channel vs Priority</h3>
                        <div class="chart-menu" ng-click="$event.stopPropagation()">
                            <button class="menu-button" ng-click="toggleChartMenu('socialMessagingVsPriority')">⋯</button>
                            <div class="menu-dropdown" ng-class="{'show': chartMenus.socialMessagingVsPriority}">
                                <div class="menu-item" ng-click="downloadChart('socialMessagingVsPriority', 'png')">Download PNG</div>
                                <div class="menu-item" ng-click="downloadChart('socialMessagingVsPriority', 'csv')">Download CSV</div>
                            </div>
                        </div>
                    </div>
                    <div class="chart-container" hc-chart="socialMessagingVsPriorityChartConfig"></div>
                </div>

                <!-- 8. Complaints per Social & Messaging Channel Over Time -->
                <div class="chart-card">
                    <div class="chart-header">
                        <h3 class="chart-title">Complaints per Social & Messaging Channel Over Time</h3>
                        <div class="chart-menu" ng-click="$event.stopPropagation()">
                            <button class="menu-button" ng-click="toggleChartMenu('socialMessagingOverTime')">⋯</button>
                            <div class="menu-dropdown" ng-class="{'show': chartMenus.socialMessagingOverTime}">
                                <div class="menu-item" ng-click="downloadChart('socialMessagingOverTime', 'png')">Download PNG</div>
                                <div class="menu-item" ng-click="downloadChart('socialMessagingOverTime', 'csv')">Download CSV</div>
                            </div>
                        </div>
                    </div>
                    <div class="chart-container" hc-chart="socialMessagingOverTimeChartConfig"></div>
                </div>
                </div>
            </div>

            <!-- Section: Review Channel Analytics -->
            <div class="dashboard-section section-spacing-top">
                <h2 class="section-title"><span class="section-icon" aria-hidden="true">
                    <svg width="18" height="18" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                        <path d="M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z" stroke="currentColor" stroke-width="2"/>
                    </svg>
                </span>Review Channel Analytics</h2>
                <div class="section-subtitle">Monitor complaints and feedback from review platforms and rating sites.</div>
                <div class="charts-grid">
                <!-- 9. Review Channel Breakdown -->
                <div class="chart-card">
                    <div class="chart-header">
                        <h3 class="chart-title">Review Channel Breakdown</h3>
                        <div class="chart-menu" ng-click="$event.stopPropagation()">
                            <button class="menu-button" ng-click="toggleChartMenu('reviewBreakdown')">⋯</button>
                            <div class="menu-dropdown" ng-class="{'show': chartMenus.reviewBreakdown}">
                                <div class="menu-item" ng-click="downloadChart('reviewBreakdown', 'png')">Download PNG</div>
                                <div class="menu-item" ng-click="downloadChart('reviewBreakdown', 'csv')">Download CSV</div>
                            </div>
                        </div>
                    </div>
                    <div class="chart-container" hc-chart="reviewBreakdownChartConfig"></div>
                </div>

                <!-- 11. Review Channel vs Status -->
                <div class="chart-card">
                    <div class="chart-header">
                        <h3 class="chart-title">Review Channel vs Status</h3>
                        <div class="chart-menu" ng-click="$event.stopPropagation()">
                            <button class="menu-button" ng-click="toggleChartMenu('reviewVsStatus')">⋯</button>
                            <div class="menu-dropdown" ng-class="{'show': chartMenus.reviewVsStatus}">
                                <div class="menu-item" ng-click="downloadChart('reviewVsStatus', 'png')">Download PNG</div>
                                <div class="menu-item" ng-click="downloadChart('reviewVsStatus', 'csv')">Download CSV</div>
                            </div>
                        </div>
                    </div>
                    <div class="chart-container" hc-chart="reviewVsStatusChartConfig"></div>
                </div>

                <!-- 12. Review Channel vs Priority -->
                <div class="chart-card">
                    <div class="chart-header">
                        <h3 class="chart-title">Review Channel vs Priority</h3>
                        <div class="chart-menu" ng-click="$event.stopPropagation()">
                            <button class="menu-button" ng-click="toggleChartMenu('reviewVsPriority')">⋯</button>
                            <div class="menu-dropdown" ng-class="{'show': chartMenus.reviewVsPriority}">
                                <div class="menu-item" ng-click="downloadChart('reviewVsPriority', 'png')">Download PNG</div>
                                <div class="menu-item" ng-click="downloadChart('reviewVsPriority', 'csv')">Download CSV</div>
                            </div>
                        </div>
                    </div>
                    <div class="chart-container" hc-chart="reviewVsPriorityChartConfig"></div>
                </div>

                <!-- 13. Complaints per Review Channel Over Time -->
                <div class="chart-card">
                    <div class="chart-header">
                        <h3 class="chart-title">Complaints per Review Channel Over Time</h3>
                        <div class="chart-menu" ng-click="$event.stopPropagation()">
                            <button class="menu-button" ng-click="toggleChartMenu('reviewOverTime')">⋯</button>
                            <div class="menu-dropdown" ng-class="{'show': chartMenus.reviewOverTime}">
                                <div class="menu-item" ng-click="downloadChart('reviewOverTime', 'png')">Download PNG</div>
                                <div class="menu-item" ng-click="downloadChart('reviewOverTime', 'csv')">Download CSV</div>
                            </div>
                        </div>
                    </div>
                    <div class="chart-container" hc-chart="reviewOverTimeChartConfig"></div>
                </div>
                </div>
            </div>
        </div>
        
        <!-- Section: Category & Keyword Analytics -->
        <div ng-switch-when="category" class="dashboard-section">
            <h2 class="section-title"><span class="section-icon" aria-hidden="true">
                <svg width="18" height="18" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                    <path d="M4 6h6v6H4V6zm10 0h6v6h-6V6zM4 16h6v4H4v-4zm10 0h6v4h-6v-4z" stroke="currentColor" stroke-width="2"/>
                </svg>
            </span>Category Analytics</h2>
            <div class="section-subtitle">Explore category distributions, statuses, priorities, and trends.</div>
            <div class="charts-grid">
                <div class="chart-card">
                    <div class="chart-header">
                        <h3 class="chart-title">Top Complaint Categories</h3>
                        <div class="chart-menu" ng-click="$event.stopPropagation()">
                            <button class="menu-button" ng-click="toggleChartMenu('topCategories')">⋯</button>
                            <div class="menu-dropdown" ng-class="{'show': chartMenus.topCategories}">
                                <div class="menu-item" ng-click="downloadChart('topCategories', 'png')">Download PNG</div>
                                <div class="menu-item" ng-click="downloadChart('topCategories', 'csv')">Download CSV</div>
                            </div>
                        </div>
                    </div>
                    <div class="chart-container" hc-chart="topCategoriesChartConfig"></div>
                </div>
                
                <div class="chart-card">
                    <div class="chart-header">
                        <h3 class="chart-title">Category vs Status</h3>
                        <div class="chart-menu" ng-click="$event.stopPropagation()">
                            <button class="menu-button" ng-click="toggleChartMenu('categoryStatus')">⋯</button>
                            <div class="menu-dropdown" ng-class="{'show': chartMenus.categoryStatus}">
                                <div class="menu-item" ng-click="downloadChart('categoryStatus', 'png')">Download PNG</div>
                                <div class="menu-item" ng-click="downloadChart('categoryStatus', 'csv')">Download CSV</div>
                            </div>
                        </div>
                    </div>
                    <div class="chart-container" hc-chart="categoryStatusChartConfig"></div>
                </div>
                
                <div class="chart-card">
                    <div class="chart-header">
                        <h3 class="chart-title">Category vs Priority</h3>
                        <div class="chart-menu" ng-click="$event.stopPropagation()">
                            <button class="menu-button" ng-click="toggleChartMenu('categoryPriority')">⋯</button>
                            <div class="menu-dropdown" ng-class="{'show': chartMenus.categoryPriority}">
                                <div class="menu-item" ng-click="downloadChart('categoryPriority', 'png')">Download PNG</div>
                                <div class="menu-item" ng-click="downloadChart('categoryPriority', 'csv')">Download CSV</div>
                            </div>
                        </div>
                    </div>
                    <div class="chart-container" hc-chart="categoryPriorityChartConfig"></div>
                </div>

                <div class="chart-card">
                    <div class="chart-header">
                        <h3 class="chart-title">Category vs Resolution Time</h3>
                        <div class="chart-menu" ng-click="$event.stopPropagation()">
                            <button class="menu-button" ng-click="toggleChartMenu('categoryResTime')">⋯</button>
                            <div class="menu-dropdown" ng-class="{'show': chartMenus.categoryResTime}">
                                <div class="menu-item" ng-click="downloadChart('categoryResTime', 'png')">Download PNG</div>
                                <div class="menu-item" ng-click="downloadChart('categoryResTime', 'csv')">Download CSV</div>
                            </div>
                        </div>
                    </div>
                    <div class="chart-container" hc-chart="categoryResTimeChartConfig"></div>
                </div>

                <div class="chart-card">
                    <div class="chart-header">
                        <h3 class="chart-title">Category Share (%)</h3>
                        <div class="chart-menu" ng-click="$event.stopPropagation()">
                            <button class="menu-button" ng-click="toggleChartMenu('categoryShare')">⋯</button>
                            <div class="menu-dropdown" ng-class="{'show': chartMenus.categoryShare}">
                                <div class="menu-item" ng-click="downloadChart('categoryShare', 'png')">Download PNG</div>
                                <div class="menu-item" ng-click="downloadChart('categoryShare', 'csv')">Download CSV</div>
                            </div>
                        </div>
                    </div>
                    <div class="chart-container" hc-chart="categoryShareChartConfig"></div>
                </div>
                
                <div class="chart-card">
                    <div class="chart-header">
                        <h3 class="chart-title">Category Trend Over Time</h3>
                        <div class="chart-menu" ng-click="$event.stopPropagation()">
                            <button class="menu-button" ng-click="toggleChartMenu('categoryTrend')">⋯</button>
                            <div class="menu-dropdown" ng-class="{'show': chartMenus.categoryTrend}">
                                <div class="menu-item" ng-click="downloadChart('categoryTrend', 'png')">Download PNG</div>
                                <div class="menu-item" ng-click="downloadChart('categoryTrend', 'csv')">Download CSV</div>
                            </div>
                        </div>
                    </div>
                    <div class="chart-container" hc-chart="categoryTrendOverTimeChartConfig"></div>
                </div>

            </div>
            <div class="section-spacing-top">
            <h2 class="section-title"><span class="section-icon" aria-hidden="true">
                <svg width="18" height="18" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                    <path d="M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                    <path d="M8 10h8M8 14h6" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
                </svg>
            </span>Keyword Analytics</h2>
            <div class="section-subtitle">Read all complaints and discover key terms and themes.</div>
            <div class="charts-grid">
                <div class="chart-card">
                    <div class="chart-header">
                        <h3 class="chart-title">Keyword–Category Correlation</h3>
                        <div class="chart-menu" ng-click="$event.stopPropagation()">
                            <button class="menu-button" ng-click="toggleChartMenu('keywordCorrelation')">⋯</button>
                            <div class="menu-dropdown" ng-class="{'show': chartMenus.keywordCorrelation}">
                                <div class="menu-item" ng-click="downloadChart('keywordCorrelation', 'png')">Download PNG</div>
                                <div class="menu-item" ng-click="downloadChart('keywordCorrelation', 'csv')">Download CSV</div>
                            </div>
                        </div>
                    </div>
                    <div class="chart-container" hc-chart="keywordCategoryCorrelationChartConfig"></div>
                </div>

                <div class="chart-card">
                    <div class="chart-header">
                        <h3 class="chart-title">Keyword Frequency by Category</h3>
                        <div class="chart-menu" ng-click="$event.stopPropagation()">
                            <button class="menu-button" ng-click="toggleChartMenu('keywordFrequencyByCategory')">⋯</button>
                            <div class="menu-dropdown" ng-class="{'show': chartMenus.keywordFrequencyByCategory}">
                                <div class="menu-item" ng-click="downloadChart('keywordFrequencyByCategory', 'png')">Download PNG</div>
                                <div class="menu-item" ng-click="downloadChart('keywordFrequencyByCategory', 'csv')">Download CSV</div>
                            </div>
                        </div>
                    </div>
                    <div class="chart-container" hc-chart="keywordFrequencyByCategoryChartConfig"></div>
                </div>

                <div class="chart-card" style="grid-column: 1 / -1;">
                    <div class="chart-header">
                        <h3 class="chart-title">All Complaints (Textual Feed)</h3>
                    </div>
                    <div class="feed-panel">
                        <div class="feed-item" ng-repeat="item in recentFeed">
                            <div class="feed-item-header">
                                <div class="feed-item-title">{{item.title}}</div>
                                <div class="feed-item-time">{{item.time}}</div>
                            </div>
                            <div class="feed-item-meta">
                                <span><strong>Category:</strong> {{item.category}}</span>
                                &nbsp;|&nbsp;
                                <span><strong>Status:</strong> {{item.status}}</span>
                                &nbsp;|&nbsp;
                                <span><strong>Priority:</strong> {{item.priority}}</span>
                                &nbsp;|&nbsp;
                                <span><strong>Source:</strong> {{item.source}}</span>
                                &nbsp;|&nbsp;
                                <span><strong>Location:</strong> {{item.location}}</span>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="chart-card" style="grid-column: 1 / -1;">
                    <div class="chart-header">
                        <h3 class="chart-title">Word Cloud</h3>
                        <div class="chart-menu" ng-click="$event.stopPropagation()">
                            <button class="menu-button" ng-click="toggleChartMenu('wordCloud')">⋯</button>
                            <div class="menu-dropdown" ng-class="{'show': chartMenus.wordCloud}">
                                <div class="menu-item" ng-click="downloadChart('wordCloud', 'png')">Download PNG</div>
                                <div class="menu-item" ng-click="downloadChart('wordCloud', 'csv')">Download CSV</div>
                            </div>
                        </div>
                    </div>
                    <div class="chart-container small" hc-chart="wordCloudChartConfig"></div>
                </div>
            </div>
            </div>
                </div>
                
        <!-- Section: Location Analytics -->
        <div ng-switch-when="location" class="dashboard-section">
            <h2 class="section-title"><span class="section-icon" aria-hidden="true">
                <svg width="18" height="18" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                    <path d="M21 10c0 7-9 13-9 13s-9-6-9-13a9 9 0 0 1 18 0z" stroke="currentColor" stroke-width="2"/>
                    <circle cx="12" cy="10" r="3" stroke="currentColor" stroke-width="2"/>
                </svg>
            </span>Location Analytics</h2>
            <div class="section-subtitle">Identify where complaints occur most and analyze geographic patterns.</div>
            <div class="charts-grid">
                <!-- 1. Location-wise Complaint Breakdown -->
                <div class="chart-card">
                    <div class="chart-header">
                        <h3 class="chart-title">Location-wise Complaint Breakdown</h3>
                    </div>
                    <div class="chart-toolbar">
                        <div class="chart-toolbar-left">
                            <div class="chart-toggle">
                            <button ng-class="{'active': locationBreakdownType === 'bar'}" ng-click="switchLocationBreakdown('bar')">Bar Chart</button>
                            <button ng-class="{'active': locationBreakdownType === 'pie'}" ng-click="switchLocationBreakdown('pie')">Donut Chart</button>
                            </div>
                        </div>
                        <div class="chart-menu" ng-click="$event.stopPropagation()">
                            <button class="menu-button" ng-click="toggleChartMenu('locationBreakdown')">⋯</button>
                            <div class="menu-dropdown" ng-class="{'show': chartMenus.locationBreakdown}">
                                <div class="menu-item" ng-click="downloadChart('locationBreakdown', 'png')">Download PNG</div>
                                <div class="menu-item" ng-click="downloadChart('locationBreakdown', 'csv')">Download CSV</div>
                            </div>
                        </div>
                    </div>
                    <div class="chart-container" hc-chart="locationBreakdownChartConfig"></div>
                </div>

                <!-- 2. Location-wise Complaint Trend Over Time -->
                <div class="chart-card">
                    <div class="chart-header">
                        <h3 class="chart-title">Location-wise Complaint Trend Over Time</h3>
                        <div class="chart-menu" ng-click="$event.stopPropagation()">
                            <button class="menu-button" ng-click="toggleChartMenu('locationTrendDaily')">⋯</button>
                            <div class="menu-dropdown" ng-class="{'show': chartMenus.locationTrendDaily}">
                                <div class="menu-item" ng-click="downloadChart('locationTrendDaily', 'png')">Download PNG</div>
                                <div class="menu-item" ng-click="downloadChart('locationTrendDaily', 'csv')">Download CSV</div>
                            </div>
                        </div>
                    </div>
                    <div class="chart-container" hc-chart="locationTrendChartConfig"></div>
                </div>

                <!-- 2.5. Geo Complaint Density -->
                <div class="chart-card">
                    <div class="chart-header">
                        <h3 class="chart-title">Geo Complaint Density</h3>
                    </div>
                    <iframe src="sri-lanka-map.html" title="Sri Lanka Map" style="width:100%;height:430px;border:0;"></iframe>
                </div>

                <!-- 3. Complaint Resolution Rate by Location -->
                <div class="chart-card">
                    <div class="chart-header">
                        <h3 class="chart-title">Complaint Resolution Rate by Location</h3>
                        <div class="chart-menu" ng-click="$event.stopPropagation()">
                            <button class="menu-button" ng-click="toggleChartMenu('locationResolutionRate')">⋯</button>
                            <div class="menu-dropdown" ng-class="{'show': chartMenus.locationResolutionRate}">
                                <div class="menu-item" ng-click="downloadChart('locationResolutionRate', 'png')">Download PNG</div>
                                <div class="menu-item" ng-click="downloadChart('locationResolutionRate', 'csv')">Download CSV</div>
                            </div>
                        </div>
                    </div>
                    <div class="chart-container" hc-chart="locationResolutionRateChartConfig"></div>
                </div>

                <!-- 3.5. Complaint SLA Breach Rate by Location -->
                <div class="chart-card">
                    <div class="chart-header">
                        <h3 class="chart-title">Complaint SLA Breach Rate by Location</h3>
                        <div class="chart-menu" ng-click="$event.stopPropagation()">
                            <button class="menu-button" ng-click="toggleChartMenu('locationSlaBreachRate')">⋯</button>
                            <div class="menu-dropdown" ng-class="{'show': chartMenus.locationSlaBreachRate}">
                                <div class="menu-item" ng-click="downloadChart('locationSlaBreachRate', 'png')">Download PNG</div>
                                <div class="menu-item" ng-click="downloadChart('locationSlaBreachRate', 'csv')">Download CSV</div>
                            </div>
                        </div>
                    </div>
                    <div class="chart-container" hc-chart="locationSlaBreachRateChartConfig"></div>
                </div>

                <!-- 4. Complaint Status by Location -->
                <div class="chart-card">
                    <div class="chart-header">
                        <h3 class="chart-title">Complaint Status by Location</h3>
                        <div class="chart-menu" ng-click="$event.stopPropagation()">
                            <button class="menu-button" ng-click="toggleChartMenu('locationVsStatus')">⋯</button>
                            <div class="menu-dropdown" ng-class="{'show': chartMenus.locationVsStatus}">
                                <div class="menu-item" ng-click="downloadChart('locationVsStatus', 'png')">Download PNG</div>
                                <div class="menu-item" ng-click="downloadChart('locationVsStatus', 'csv')">Download CSV</div>
                            </div>
                        </div>
                    </div>
                    <div class="chart-container" hc-chart="locationVsStatusChartConfig"></div>
                </div>

                <!-- 5. Complaint Priority by Location -->
                <div class="chart-card">
                    <div class="chart-header">
                        <h3 class="chart-title">Complaint Priority by Location</h3>
                        <div class="chart-menu" ng-click="$event.stopPropagation()">
                            <button class="menu-button" ng-click="toggleChartMenu('locationVsPriority')">⋯</button>
                            <div class="menu-dropdown" ng-class="{'show': chartMenus.locationVsPriority}">
                                <div class="menu-item" ng-click="downloadChart('locationVsPriority', 'png')">Download PNG</div>
                                <div class="menu-item" ng-click="downloadChart('locationVsPriority', 'csv')">Download CSV</div>
                            </div>
                        </div>
                    </div>
                    <div class="chart-container" hc-chart="locationVsPriorityChartConfig"></div>
                </div>

                <!-- 6. Complaint Growth by Location -->
                <div class="chart-card">
                    <div class="chart-header">
                        <h3 class="chart-title">Complaint Growth by Location</h3>
                        <div class="chart-menu" ng-click="$event.stopPropagation()">
                            <button class="menu-button" ng-click="toggleChartMenu('locationGrowth')">⋯</button>
                            <div class="menu-dropdown" ng-class="{'show': chartMenus.locationGrowth}">
                                <div class="menu-item" ng-click="downloadChart('locationGrowth', 'png')">Download PNG</div>
                                <div class="menu-item" ng-click="downloadChart('locationGrowth', 'csv')">Download CSV</div>
                            </div>
                        </div>
                    </div>
                    <div class="chart-container" hc-chart="locationGrowthChartConfig"></div>
                </div>

                <!-- 7. Complaint Source Breakdown by Location -->
                <div class="chart-card">
                    <div class="chart-header">
                        <h3 class="chart-title">Complaint Source Breakdown by Location</h3>
                        <div class="chart-menu" ng-click="$event.stopPropagation()">
                            <button class="menu-button" ng-click="toggleChartMenu('locationVsSource')">⋯</button>
                            <div class="menu-dropdown" ng-class="{'show': chartMenus.locationVsSource}">
                                <div class="menu-item" ng-click="downloadChart('locationVsSource', 'png')">Download PNG</div>
                                <div class="menu-item" ng-click="downloadChart('locationVsSource', 'csv')">Download CSV</div>
                            </div>
                        </div>
                    </div>
                    <div class="chart-container" hc-chart="locationVsSourceChartConfig"></div>
                </div>

                <!-- 8. Complaint Source Mix Heatmap by Location -->
                <div class="chart-card">
                    <div class="chart-header">
                        <h3 class="chart-title">Complaint Source Mix Heatmap by Location</h3>
                        <div class="chart-menu" ng-click="$event.stopPropagation()">
                            <button class="menu-button" ng-click="toggleChartMenu('locationSourceHeatmap')">⋯</button>
                            <div class="menu-dropdown" ng-class="{'show': chartMenus.locationSourceHeatmap}">
                                <div class="menu-item" ng-click="downloadChart('locationSourceHeatmap', 'png')">Download PNG</div>
                                <div class="menu-item" ng-click="downloadChart('locationSourceHeatmap', 'csv')">Download CSV</div>
                            </div>
                        </div>
                    </div>
                    <div class="chart-container" hc-chart="locationSourceHeatmapChartConfig"></div>
                </div>

                <!-- 9. Complaints via Social & Messaging Channels by Location -->
                <div class="chart-card">
                    <div class="chart-header">
                        <h3 class="chart-title">Complaints via Social & Messaging Channels by Location</h3>
                        <div class="chart-menu" ng-click="$event.stopPropagation()">
                            <button class="menu-button" ng-click="toggleChartMenu('locationVsSocialMessaging')">⋯</button>
                            <div class="menu-dropdown" ng-class="{'show': chartMenus.locationVsSocialMessaging}">
                                <div class="menu-item" ng-click="downloadChart('locationVsSocialMessaging', 'png')">Download PNG</div>
                                <div class="menu-item" ng-click="downloadChart('locationVsSocialMessaging', 'csv')">Download CSV</div>
                            </div>
                        </div>
                    </div>
                    <div class="chart-container" hc-chart="locationVsSocialMessagingChartConfig"></div>
                </div>

                <!-- 10. Complaints via Review Channels by Location -->
                <div class="chart-card">
                    <div class="chart-header">
                        <h3 class="chart-title">Complaints via Review Channels by Location</h3>
                        <div class="chart-menu" ng-click="$event.stopPropagation()">
                            <button class="menu-button" ng-click="toggleChartMenu('locationVsReview')">⋯</button>
                            <div class="menu-dropdown" ng-class="{'show': chartMenus.locationVsReview}">
                                <div class="menu-item" ng-click="downloadChart('locationVsReview', 'png')">Download PNG</div>
                                <div class="menu-item" ng-click="downloadChart('locationVsReview', 'csv')">Download CSV</div>
                            </div>
                        </div>
                    </div>
                    <div class="chart-container" hc-chart="locationVsReviewChartConfig"></div>
                </div>

            </div>
        </div>
        
        <!-- Section: Resolution & Performance -->
        <div ng-switch-when="resolution" class="dashboard-section">
            <h2 class="section-title"><span class="section-icon" aria-hidden="true">
                <svg width="18" height="18" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                    <circle cx="12" cy="12" r="9" stroke="currentColor" stroke-width="2"/>
                    <path d="M12 7v6l4 2" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                </svg>
            </span>Resolution Analytics</h2>
            <div class="section-subtitle">Resolution times, lifecycle, rates, and funnel.</div>
            <div class="charts-grid">
                <!-- Resolution Graphs -->
                <div class="chart-card">
                    <div class="chart-header">
                        <h3 class="chart-title">Average Resolution Time by Source</h3>
                        <div class="chart-actions">
                            <button class="fullscreen-button" title="View full screen" aria-label="View full screen" ng-click="toggleFullscreen($event)">
                                <svg width="18" height="18" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                                    <path d="M4 9V4h5v2H6v3H4zm10-5h5v5h-2V6h-3V4zM9 20H4v-5h2v3h3v2zm11-5v5h-5v-2h3v-3h2z" fill="currentColor"/>
                                </svg>
                            </button>
                        </div>
                    </div>
                    <div class="chart-toolbar">
                        <div class="chart-toolbar-left">
                            <div class="chart-toggle">
                            <button ng-class="{'active': avgResTimeChartType === 'bar'}" ng-click="switchAvgResTime('bar')">Bar Chart</button>
                            <button ng-class="{'active': avgResTimeChartType === 'donut'}" ng-click="switchAvgResTime('donut')">Donut Chart</button>
                            </div>
                        </div>
                    </div>
                    <div class="chart-container" hc-chart="avgResTimeChartConfig"></div>
                </div>
                
                <div class="chart-card">
                    <div class="chart-header">
                        <h3 class="chart-title">Resolution Rate by Source</h3>
                        <div class="chart-actions">
                            <button class="fullscreen-button" title="View full screen" aria-label="View full screen" ng-click="toggleFullscreen($event)">
                                <svg width="18" height="18" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                                    <path d="M4 9V4h5v2H6v3H4zm10-5h5v5h-2V6h-3V4zM9 20H4v-5h2v3h3v2zm11-5v5h-5v-2h3v-3h2z" fill="currentColor"/>
                                </svg>
                            </button>
                        </div>
                    </div>
                    <div class="chart-container" hc-chart="resolutionRateByChannelChartConfig"></div>
                </div>

                <div class="chart-card">
                    <div class="chart-header">
                        <h3 class="chart-title">Resolution Rate by Social & Messaging Channel</h3>
                    </div>
                    <div class="chart-container" hc-chart="resolutionRateBySocialMessagingChartConfig"></div>
                </div>
                
                <div class="chart-card">
                    <div class="chart-header">
                        <h3 class="chart-title">Resolution Rate by Review Channel</h3>
                            </div>
                    <div class="chart-container" hc-chart="resolutionRateByReviewChartConfig"></div>
                        </div>
                
                <div class="chart-card">
                    <div class="chart-header">
                        <h3 class="chart-title">Slowest-Resolving Categories</h3>
                    </div>
                    <div class="chart-container" hc-chart="slowestResolvingCategoriesChartConfig"></div>
                </div>
                
                <div class="chart-card">
                    <div class="chart-header">
                        <h3 class="chart-title">Fastest-Resolving Locations</h3>
                            </div>
                    <div class="chart-container" hc-chart="fastestResolvingLocationsChartConfig"></div>
                        </div>
                
                <div class="chart-card">
                    <div class="chart-header">
                        <h3 class="chart-title">Complaint Closure Rate Over Time</h3>
                    </div>
                    <div class="chart-container" hc-chart="complaintClosureRateChartConfig"></div>
                </div>
                
                <div class="chart-card">
                    <div class="chart-header">
                        <h3 class="chart-title">Complaint Processing Funnel</h3>
                            </div>
                    <div class="chart-container large" hc-chart="funnelChartConfig"></div>
                        </div>
                </div>
                
            <!-- Performance Graphs (4 Total) -->
            <div class="section-spacing-top"></div>
            <h2 class="section-title"><span class="section-icon" aria-hidden="true">
                <svg width="18" height="18" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                    <path d="M4 20V10m6 10V6m6 14V12m4 8H2" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
                </svg>
            </span>Performance Analytics</h2>
            <div class="section-subtitle">SLA adherence and first-response performance.</div>
            <div class="charts-grid">
                <div class="chart-card">
                    <div class="chart-header">
                        <h3 class="chart-title">SLA Compliance Rate</h3>
                            </div>
                    <div class="chart-container" hc-chart="slaComplianceChartConfig"></div>
                        </div>
        
                <div class="chart-card">
                    <div class="chart-header">
                        <h3 class="chart-title">First-Contact Resolution Rate</h3>
                    </div>
                    <div class="chart-container" hc-chart="firstContactResolutionRateChartConfig"></div>
                </div>
                
                <div class="chart-card">
                    <div class="chart-header">
                        <h3 class="chart-title">Resolved Complaints by Employee</h3>
                            </div>
                    <div class="chart-container" hc-chart="employeeResolvedCountChartConfig"></div>
        </div>
        
                <div class="chart-card">
                    <div class="chart-header">
                        <h3 class="chart-title">Avg Time per Complaint (Employees)</h3>
                            </div>
                    <div class="chart-container" hc-chart="employeeAvgTimePerComplaintChartConfig"></div>
                </div>
                
                <div class="chart-card">
                    <div class="chart-header">
                        <h3 class="chart-title">Complaint Status Breakdown by Employee</h3>
                            </div>
                    <div class="chart-container" hc-chart="employeeStatusBreakdownChartConfig"></div>
                </div>
                
                <div class="chart-card">
                    <div class="chart-header">
                        <h3 class="chart-title">Complaint Priority Breakdown by Employee</h3>
                            </div>
                    <div class="chart-container" hc-chart="employeePriorityBreakdownChartConfig"></div>
                </div>
            </div>
        </div>
        
        <!-- Section: Timeline & Insights -->
        <div ng-switch-when="timeline" class="dashboard-section">
            <h2 class="section-title"><span class="section-icon" aria-hidden="true">
                <svg width="18" height="18" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                    <path d="M4 12h16M12 4v16" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
                </svg>
            </span>Timeline & Insights</h2>
            <div class="section-subtitle">Track complaint evolution and discover recent activity.</div>
            <div class="charts-grid">
                <div class="chart-card">
                    <div class="chart-header">
                        <h3 class="chart-title">Complaint Open vs Resolved Timeline</h3>
                        <div class="chart-menu" ng-click="$event.stopPropagation()">
                            <button class="menu-button" ng-click="toggleChartMenu('timeline')">⋯</button>
                            <div class="menu-dropdown" ng-class="{'show': chartMenus.timeline}">
                                <div class="menu-item" ng-click="downloadChart('timeline', 'png')">Download PNG</div>
                                <div class="menu-item" ng-click="downloadChart('timeline', 'csv')">Download CSV</div>
                            </div>
                        </div>
                    </div>
                    <div class="chart-container large" hc-chart="timelineChartConfig"></div>
                </div>
                
                
                
                <div class="chart-card">
                    <div class="chart-header">
                        <h3 class="chart-title">Top Repeating Issues</h3>
                        <div class="chart-menu" ng-click="$event.stopPropagation()">
                            <button class="menu-button" ng-click="toggleChartMenu('repeatingIssues')">⋯</button>
                            <div class="menu-dropdown" ng-class="{'show': chartMenus.repeatingIssues}">
                                <div class="menu-item" ng-click="downloadChart('repeatingIssues', 'png')">Download PNG</div>
                                <div class="menu-item" ng-click="downloadChart('repeatingIssues', 'csv')">Download CSV</div>
                            </div>
                        </div>
                    </div>
                    <div class="chart-container" hc-chart="repeatingIssuesChartConfig"></div>
                </div>

                <div class="chart-card">
                    <div class="chart-header">
                        <h3 class="chart-title">Complaint Lifecycle Duration Trend</h3>
                        <div class="chart-menu" ng-click="$event.stopPropagation()">
                            <button class="menu-button" ng-click="toggleChartMenu('lifecycleDuration')">⋯</button>
                            <div class="menu-dropdown" ng-class="{'show': chartMenus.lifecycleDuration}">
                                <div class="menu-item" ng-click="downloadChart('lifecycleDuration', 'png')">Download PNG</div>
                                <div class="menu-item" ng-click="downloadChart('lifecycleDuration', 'csv')">Download CSV</div>
                            </div>
                        </div>
                    </div>
                    <div class="chart-container" hc-chart="lifecycleDurationTrendChartConfig"></div>
                </div>

                <div class="chart-card">
                    <div class="chart-header">
                        <h3 class="chart-title">First-Contact Resolution Rate</h3>
                        <div class="chart-menu" ng-click="$event.stopPropagation()">
                            <button class="menu-button" ng-click="toggleChartMenu('fcrRate')">⋯</button>
                            <div class="menu-dropdown" ng-class="{'show': chartMenus.fcrRate}">
                                <div class="menu-item" ng-click="downloadChart('fcrRate', 'png')">Download PNG</div>
                                <div class="menu-item" ng-click="downloadChart('fcrRate', 'csv')">Download CSV</div>
                            </div>
                        </div>
                    </div>
                    <div class="chart-container" hc-chart="firstContactResolutionRateChartConfig"></div>
                </div>
            </div>
        </div>
        
        
        </div>
    </div>
    
    <!-- Scripts -->
    <script src="app.js"></script>
    <script src="hcChart.directive.js"></script>
</body>
</html>

</html>
